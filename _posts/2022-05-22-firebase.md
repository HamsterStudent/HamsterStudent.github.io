---
layout: post
title: "Snapshot"
date: 2023-05-22
last_modified_at: 2023-05-22
categories: [Firebase]
---

```javascript
const qu = query(
  // dbService에 있는 "tweets"라는 collection을 가져와라.
  collection(dbService, "tweets"),
  // 시간순으로 정렬해라.(createAt은 document들 내부에 선언되어있음)
  // 생략가능
  orderBy("createAt", "desc"),
);
```

### onSnapShot 사용

```javascript
// 쿼리 결과를 받아옴
onSnapShot(qu, (snapshot) => {
    const tweetArr = snapshot.docs.map((doc) => (
        // 배열 내부의 모든 요소들을 이 형태로 저장
        {
            // doc의 Id
            id : doc.id,
            // doc에서 data() 실행해서 각 doc의 정보를 가져옴
            ...doc.data(),
        }
    ));
    // state에 배열을 집어넣는다
    setTweets(tweetarr);
```

<br><br>
